- 출처 : 김영한 저) JAVA ORM 표준 Java Persistence Api 프로그래밍
- Page 54부터 정리

### JPA란 무엇인가?
- JPA(Java Persistence Api)는 자바 진영의 ORM 기술 표준이다.
- 애플리케이션과 JDBC 사이에 동작한다.

#### ORM이란?
- Object-Relational Mapping은 이름 그대로 객체와 관계형 데이터베이스를 매핑한다는 뜻
- ORM 프레임워크는 객체와 테이블을 매핑해서 패러다임의 불일치 문제를 개발자 대신해서 해결해준다.
- 예
  - ORM프레임워크를 사용하면 객체를 데이터베이스에 저장할 때 INSERT SQL을 직접 작성하는 것이 아니라, 객체를 마치 자바 컬렉션에 저장하듯이 ORM프레임워크에 저장하면 된다.
  - ORM프레임워크가 적절한 INSERT SQL을 생성하서 데이터베이스에 객체를 저장해준다.
- JPA진영에서 다음을 수행한다.
  - entity 분석
  - INSERT SQL 생성
  - JDBC API 사용
  - 패러다임 불일치 해결
- JPA를 사용해서 객체를 저장하는 코드는 다음과 같다.
```
jpa.persist(member); //저장
```
- JPA를 사용하여 객체를 조회하는 코드는 다음과 같다.
```
Member member = jpa.find(memberId); //조회
```
- ORM프레임워크는 단순히 SQL을 개발자 대신 생성해서 데이터베이스에 전달해주는 것 뿐만 아니라 앞서 이야기한 다양한 패러다임의 불일치 문제들도 해결해준다.
- 따라서 객체 측면에서는 정교한 객체 모델링을 할 수 있고 관계형 데이터베이스는 데이터베이스에 맞도록 모델링하면 된다.
- 둘을 어떻게 매핑해야 하는지 매핑 방법만 ORM 프레임워크에게 알려주면 된다.
- 덕분에 개발자는 데이터 중심인 관계형 데이터베이스를 사용해도 객체지향 애플리케이션 개발에 집중할 수 있다.
- 자바 진영에서 하이버네이트라는 프레임워크가 많은 패러다임 불일치 문제를 해결해준다.

### JPA소개
- JPA는 자바 ORM 기술에 대한 API표준 명세이다.
- 쉽게 이야기 해서 인터페이스를 모아둔 것
- JPA를 사용하려면 JPA를 구현한 ORM 프레임워크를 선택해야 한다.
- 이 책은 JPA2.1버전을 구현 프레임워크로 하이버네이트를 사용한다.

#### 왜 JPA를 사용해야 할까?
- 생산성
  - 쿼리작성 -> jdbc api 연동같은 귀찮은 코드 작성을 하는 등 반복적인 작업은 JPA가 대신 처리해준다.
  ```
    jpa.persist(member); //저장
    Member member = jpa.find(memberId);
  ```
  - DDL문을 자동으로 생성해주는 기능도 있다.
- 유지보수
  - SQL 의존적인 개발에서 이야기 했듯, SQL을 직접 다루면 엔티티에 필드 하나 추가해도 관련된 등록, 수정, 조회 SQL과 결과를 매핑하기 위한 JDBC API 코드를 모두 변경해야 한다.
  - 반면 JPA를 사용하면 이런 과정을 JPA가 대신 처리해주므로 필드를 추가하거나 삭제해도 수정해야 할 코드가 줄어든다.
  - SQL JDBC API를 작성하지 않으니 유지보수 해야하는 코드 수가 줄어든다.
- 패러다임 불일치 해결
- 성능 향상
- 데이터 접근 추상화와 벤더 독립적
- 표준

## JPA 시작
- 환경 구축은 생략
- 예제 소스의 경우 나중에 열 수 있을 때 열것

### 객체의 매핑
- 사용하는 Annotation
  - @Entity
  - @Table
  - @Id
  - @Column
  - 매핑 정보가 없는 필드?
    - 필드명을 사용하여 컬럼명으로 매핑한다.

#### Entity
- 해당 클래스가 테이블과 매핑한다고 JPA에게 알려준다.
- 이렇게 @Entity가 사용된 클래스를 엔티티 클래스라고 한다.

#### @Table
- 엔티티 클래스를 매핑할 테이블 정보를 알려준다.
- 여기서 name 속성을 이용해 특정 엔티티 클래스를 해당 테이블 이름으로 매핑한다.
- 예시
```
@Table(name="테이블명")
```
- 이 어노테이션을 생략하면 클래스 이름을 테이블 이름으로 매핑한다.(엔티티 이름으로 사용)

#### @Id
- 엔티티 클래스의 필드를 테이블의 기본 키(Primary Key)에 매핑한다.
- 여기서는 엔티티의 id 필드를 테이블의 ID기본 키 컬럼에 매핑한다.
- @Id 가 사용된 필드를 식별자 필드라고 한다.

#### @Column
- 필드를 컬럼에 매핑한다.
- 여기서는 name 속성을 사용해서 특정 엔티티의 필드명을 해당 테이블의 필드명으로 매핑하다.
- 예시
```
  @Column(name = "컬럼명")
```
